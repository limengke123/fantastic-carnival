# admin页总结

这是博客系统的录入页面,也就是管理页面,难点在于频繁地和接口增删改查地交互,状态的管理容易出现问题.

## 框架及其相关

基本上是`vue`官方推荐的那一套,`vue`、`vue-router`、`vuex`、`mobx`，在编辑器的选择上是用的`simplemde`算是一个样式和功能都很不错的编辑器，`markdown`渲染成`html`用的就是常规的`highlight.js`。

## 打包优化

一开始基本没做什么打包优化，后来打包出来发现还是非常大的，这也是`spa`单页面打包出来的单个入口文件过大导致首页白屏的原因，所以也就开始了下面的一些优化手段：

### 按需加载

根据不同的路由，把对应的组件代码打包，访问这个路由的时候再去下载对应的`chunk`文件。优点很明显，我把登录页面单独打包成一个`chunk`文件，原来打开登录页面需要在下载完一个完整的`js`才可以，现在只要下载极小的`chunk`文件就能快速地打开了登录页面。

### 查看打包细节

按需加载就能解决打包问题过大的原因了吗？除了登录页以外的两个页面依然存在打包后的体积很大的问题，虽然相较未按需加载前已经好了很多了。虽然我们只知道打包后的文件非常大，却不知道到底为什么才写那么一些东西会变得如此庞大，所以这里需要用到一个`webpack`的一个检查打包细节的插件：`webpack-bundle-analyzer`

下面稍微介绍一下用法：

```js
// 引入
const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin

// 在plugins的数组中加入这一项
plugins:[
    // 打包分析
    new BundleAnalyzerPlugin()
    ],

```

配置好`webpack`后，重新打包一次，这个插件会在本地起一个服务，自动打开页面，页面上就很明显地告诉你打包出来的`bundle.js`里面到底什么东西体积这么大。基本上，自己写的东西会很小，占体积大的基本上都是第三方的库。

看了我的打包分析结果，发现`underscore`、`highlight.js`、`simplemde`。

### 继续优化

先来看看为啥`underscore`这么大