# client-page总结

这就是一个比较简单地用`react`系列去展示下前端页面。

所涉及主要的库：`react`、`react-router`、`mobx`

总体思路其实和`vue`没有什么区别，基本`react`有的`vue`也都有，只是写法有点差异。`react`的抽象性更加强、灵活，所以可玩性更高，`vue`的单文件写法就相对中规中矩，可读性比`react`要强一些。

## 问题

基本流程下来没有什么大问题，但是依然还是有遇到问题：

* 文章详情页面出现一个基本必现的`bug`，如果文章比较长，就需要滚动浏览，快速滚动滚轮的时候在中间每一个点会卡顿，阻止滚轮继续滚动，稍微调整下滚轮又能继续向下滚动。为什么会出现这个奇怪的现象呢，这里是引用了一个自己写的`backTop`组件导致的。

* 还有个比较常见的小问题，切换相同组件的页面的时候，滚动条不会自动变成0，而是保留之前页面的滚动条位置。查阅了下，发现有个滚动的api挺好用的，也能很好的解决这个问题。`window.scrollTo`和`window.scrollBy`能够方便的滚动页面，稍微配合一点计时器比如`requesetAnimate`就能实现流畅的滚动效果了。

* 组件的卸载，平时也没太注意，但是确实过程中遇到了这么个问题。0这里有个计时器的组件，在两个页面复用，那么就存在一个Bug，上一个页面的timer还没有clear，第二个页面又开始计时了，所以`react`给了我报错提示，排查了半天才发现是这里出现了问题。那么解决办法也很简单，在组件的销毁的生命周期函数中把计时器给关了，这里就是要注意下，特别是那种用了计时器，或者是事件监听等等，在组件销毁的时候要关掉计时器和注销监听事件。

## 其他

`react`用高阶组件复用的方式，其实相对于混入(`mixin`)还是要优雅很多了，并且用上`es7`的装饰器能很快的用上高阶组件。

mobx做为状态管理工具，其实是要比redux简化了很多，写起来的感觉也基本`vuex`差别不大。

## 参考页面

[一个博客](https://github.com/Marco2333/react-projects/blob/master/blog/app/Routes.js)